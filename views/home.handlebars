<header class="header">
    <nav id="mainNavbar" class="navbar navbar-expand-lg bg-white shadow-sm fixed-top">
        <div class="container">
            <a class="navbar-brand fs-3 fw-bold text-primary" href="#hero">
                <i class="bi bi-mortarboard-fill text-success"></i> VietEdu Academy
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navMenu">
                <ul class="navbar-nav mx-auto mb-2 mb-lg-0 column-gap-3">
                    <li class="nav-item"><a class="nav-link active" href="#hero">Trang chủ</a></li>
                    <li class="nav-item"><a class="nav-link" href="#featured-courses">Nổi bật</a></li>
                    <li class="nav-item"><a class="nav-link" href="#categories">Lĩnh vực</a></li>
                    <li class="nav-item"><a class="nav-link" href="#newest-courses">Mới nhất</a></li>
                    <li class="nav-item"><a class="nav-link" href="#testimonials">Feedback</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Liên hệ</a></li>
                </ul>
                
                <div class="d-flex gap-2">
                    <a href="/account/signin" class="btn btn-outline-success rounded-pill">Đăng nhập</a>
                    <a href="/account/signup" class="btn btn-success rounded-pill">Đăng ký</a>
                </div>
            </div>
        </div>
    </nav>
</header>   
<main>

    <section id="hero" class="bg-light">
        <div class="container">
            <div class="row align-items-center g-5">
                <div class="col-lg-6" data-aos="fade-right">
                    <h1 class="display-3 fw-bold lh-1 mb-4">
                        Khám phá tiềm năng,
                        <br>
                        <span class="text-primary">Mở lối tương lai</span>
                    </h1>
                    <p class="lead text-muted mb-4">
                        VietAcademy là nền tảng học trực tuyến hàng đầu, cung cấp hàng ngàn khoá học chất lượng cao từ các chuyên gia đầu ngành.
                    </p>
                    <a href="/courses" class="btn btn-success btn-lg rounded-pill px-4">Bắt đầu học ngay</a>
                </div>
                
                <div class="col-lg-6" data-aos="fade-left" data-aos-delay="200">
                    <img src="https://images.unsplash.com/photo-1543269865-cbf427effbad?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Học trực tuyến" class="img-fluid rounded-4 shadow-lg">
                </div>
            </div>
        </div>
    </section>
    <section id="featured-courses" class="bg-white">
        <div class="container">
            <h2 class="text-center mb-5" data-aos="fade-up">Nổi bật tuần qua</h2>
            
            <div class="row g-4">

                {{#each topWeekCourses}}
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
                    <div class="card h-100 shadow-sm border-0 overflow-hidden">
                        <div class="position-relative">
                            <a href="/courses/detail/{{this.course_id}}"><img src={{this.image_url}} class="card-img-top"></a>
                            <span class="badge bg-primary position-absolute top-0 start-0 m-3 rounded-pill">{{this.category_name}}</span>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <a href="#" class="h5 card-title text-decoration-none text-body-emphasis mb-2">{{this.title}}</a>
                            <span class="star-rating">
                                {{{render_stars this.rating_avg}}}
                            </span>
                        </div>
                        <div class="card-footer bg-white pt-0 border-top-0 pb-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <img src={{this.instructor_avatar}} alt="Author" class="rounded-circle" width="30" height="30">
                                    <span class="ms-2 small text-muted">{{this.instructor_name}}</span>
                                </div>
                                <span class="fs-5 fw-bold text-primary">{{format_number this.sale_price}}đ</span>
                            </div>
                        </div>
                    </div>
                </div>
                {{/each}}

            </div>
        </div>
    </section>
    <section id="categories" class="bg-light">
        <div class="container">
            <h2 class="text-center mb-5" data-aos="fade-up">Lĩnh vực hàng đầu</h2>
            
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
                
                {{#each topCategories}}
                <div class="col" data-aos="fade-up" data-aos-delay="100">
                    <a href="/courses/by-category/{{this.category_id}}" class="card h-100 text-decoration-none text-center p-4 shadow-sm border-0 category-card-hover">
                    <i class="{{iconOrDefault ../categoryIcons this.category_name}} fs-1 text-success mb-3"></i>
                    <h4 class="h5 mb-1">{{this.category_name}}</h4>
                    <p class="text-muted small mb-0">{{this.total_courses}}+ courses</p>
                    </a>
                </div>
                {{/each}}
                
            </div>
        </div>
    </section>
    <section id="most-viewed" class="bg-white">
        <div class="container position-relative">
            <h2 class="text-center mb-5" data-aos="fade-up">Xem nhiều nhất</h2>
            
            <div class="swiper courses-swiper" id="most-viewed-swiper" data-aos="fade-up">
                <div class="swiper-wrapper pb-5">
                    
                    {{#each mostViewCourses}}
                    <div class="swiper-slide h-auto">
                        <div class="card h-100 shadow-sm border-0 overflow-hidden">
                            <div class="position-relative">
                                <a href="/courses/detail/{{this.course_id}}"><img src={{this.image_url}} class="card-img-top"></a>
                                <span class="badge bg-primary position-absolute top-0 start-0 m-3 rounded-pill">{{this.title}}</span>
                            </div>
                            <div class="card-body d-flex flex-column">
                                <a href="/courses/detail/{{this.course_id}}" class="h5 card-title text-decoration-none text-body-emphasis mb-2">{{this.short_description}}</a>
                                <span class="star-rating">
                                    {{{render_stars this.rating_avg}}} {{this.rating_avg}}
                                </span>
                            </div>
                            <div class="card-footer bg-white pt-0 border-top-0 pb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <img src={{this.avatar_url}} alt="Author" class="rounded-circle" width="30" height="30">
                                        <span class="ms-2 small text-muted">{{this.instructor_name}}</span>
                                    </div>
                                    <span class="fs-5 fw-bold text-primary">{{format_number this.sale_price}}đ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                    
                    

                </div>
                <div class="swiper-pagination position-absolute bottom-0"></div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>

        </div>
    </section>
    <section id="newest-courses" class="bg-light">
        <div class="container position-relative">
            <h2 class="text-center mb-5" data-aos="fade-up">Khoá học mới nhất</h2>
            
            <div class="swiper courses-swiper" id="newest-courses-swiper" data-aos="fade-up">
                <div class="swiper-wrapper pb-5">
                    
                    {{#each newestCourses}}
                    <div class="swiper-slide h-auto">
                        <div class="card h-100 shadow-sm border-0 overflow-hidden" style="background-color:white;">
                            <div class="position-relative">
                                <a href="/courses/detail/{{this.course_id}}">
                                    <img 
                                    src="{{this.image_url}}" 
                                    alt="{{this.title}}" 
                                    class="card-img-top"
                                    style="width:100%; aspect-ratio:3/2; object-fit:cover; object-position:center;"
                                    >
                                </a>
                                <span class="badge bg-primary position-absolute top-0 start-0 m-3 rounded-pill">{{this.title}}</span>
                            </div>
                            <div class="card-body d-flex flex-column">
                                <a href="/courses/detail/{{this.course_id}}" class="h5 card-title text-decoration-none text-body-emphasis mb-2">{{this.short_description}}</a>
                                <span class="star-rating">
                                    {{{render_stars this.rating_avg}}} {{this.rating_avg}}
                                </span>
                            </div>
                            <div class="card-footer bg-white pt-0 border-top-0 pb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <img src={{this.avatar_url}} alt="Author" class="rounded-circle" width="30" height="30">
                                        <span class="ms-2 small text-muted">{{this.instructor_name}}</span>
                                    </div>
                                    <span class="fs-5 fw-bold text-primary">{{format_number this.sale_price}}đ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/each}}

                </div>
                <div class="swiper-pagination position-absolute bottom-0"></div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>

        </div>
    </section>
    <section id="testimonials" class="bg-secondary" style="background-color: var(--bs-secondary) !important;">
        <div class="container" data-aos="fade-in">
            <h2 class="text-center mb-5" style="color: var(--bs-primary-dark);">Học viên nói gì về VietAcademy</h2>
            
            <div id="testimonial-swiper" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
                <div class="carousel-inner">
                    
                    <div class="carousel-item">
                        <div class="col-lg-8 col-md-10 mx-auto text-center p-4" style="width:700px; max-width:90%; height:350px;">
                            <img src="https://scontent.fsgn8-4.fna.fbcdn.net/v/t39.30808-6/561119543_2065094327230167_714847697422080790_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=Gxo0Ah8pTb8Q7kNvwGC8mZl&_nc_oc=AdlXnyOQh1oNRrcH9gpug4ZWG161BbkFtYz1gClL3q1tmLRvf5NnExz_A10Y1j0lHXXDETG_VRDq5WiqbTvYAiNu&_nc_zt=23&_nc_ht=scontent.fsgn8-4.fna&_nc_gid=gXl7WtnaYAe2-wmfM9ydPw&oh=00_Afcvzp1TKrr7bcRzHAi8hWq-XNi8CMx1VxzQSF4na7vBGQ&oe=6902DABA" 
                            alt="Học viên" class="rounded-circle shadow-lg mx-auto mb-3 border border-3 border-white" 
                            style="width:100px;height:100px;object-fit:cover;">
                            <p class="fs-5 fst-italic my-4">
                                "Khoá học bùng lổ 3636"
                            </p>
                            <h4 class="h5 fw-bold mb-1">Trac Van Ngoc Phuc</h4>
                            <span class="text-muted">Frontend Developer tại ABC Corp</span>
                        </div>
                    </div>
                    
                    <div class="carousel-item active">
                        <div class="col-lg-8 col-md-10 mx-auto text-center p-4" style="width:700px; max-width:90%; height:350px;"> 
                            <img src="https://images.unsplash.com/photo-1552058544-f2b08422138a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&h=100&q=80" alt="Học viên" class="rounded-circle shadow-lg mx-auto mb-3 border border-3 border-white">
                            <p class="fs-5 fst-italic my-4">
                                "Tôi đã học khoá 'Phân tích Dữ liệu' và thực sự ấn tượng. Kiến thức được hệ thống hoá rất logic, dễ hiểu ngay cả với người mới bắt đầu như tôi."
                            </p>
                            <h4 class="h5 fw-bold mb-1">Trần Văn Minh</h4>
                            <span class="text-muted">Sinh viên Đại học Bách Khoa</span>
                        </div>
                    </div>
                    
                    <div class="carousel-item">
                        <div class="col-lg-8 col-md-10 mx-auto text-center p-4" style="width:700px; max-width:90%; height:350px;">
                            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&h=100&q=80" alt="Học viên" class="rounded-circle shadow-lg mx-auto mb-3 border border-3 border-white">
                            <p class="fs-5 fst-italic my-4">
                                "Là một Marketer, tôi cần cập nhật xu hướng liên tục. Khoá 'Digital Marketing' của VietAcademy đã cung cấp cho tôi những công cụ và chiến lược mới nhất, rất hữu ích cho công việc."
                            </p>
                            <h4 class="h5 fw-bold mb-1">Lê Thị Bích Hảo</h4>
                            <span class="text-muted">Marketing Manager</span>
                        </div>
                    </div>
                    
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#testimonial-swiper" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#testimonial-swiper" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </section>
    <section id="contact" class="bg-light">
        <div class="container">
            <div class="col-lg-8 col-md-10 mx-auto text-center">
                <h2 class="fw-bold display-5 mb-3 text-primary">
                    Liên hệ với VietEdu Academy
                </h2>
    
                <p class="text-muted mb-5 lead">
                    Hỗ trợ từ 8:00 - 20:00 tất cả các ngày trong tuần
                </p>
    
                <div class="mb-5">
                    <p class="fs-5 d-flex justify-content-center align-items-center flex-wrap mb-3">
                        <i class="fa-solid fa-location-dot text-primary fs-3 me-3" style="width: 30px;"></i>
                        <span>01 Võ Văn Ngân, P. Linh Chiểu, TP. Thủ Đức, TP. HCM</span>
                    </p>
                    <p class="fs-5 d-flex justify-content-center align-items-center flex-wrap mb-3">
                        <i class="fa-solid fa-envelope text-primary fs-3 me-3" style="width: 30px;"></i>
                        <span>support@vietacademy.vn</span>
                    </p>
                    <p class="fs-5 d-flex justify-content-center align-items-center flex-wrap mb-3">
                        <i class="fa-solid fa-phone text-primary fs-3 me-3" style="width: 30px;"></i>
                        <span>(028) 1234 5678</span>
                    </p>
                </div>
    
                <div class="d-flex justify-content-center gap-4">
                    <a href="https://www.facebook.com/dhspkt.hcmute" class="text-primary fs-1"><i class="fa-brands fa-facebook"></i></a>
                    <a href="https://www.youtube.com/@UTETVChannel" class="text-primary fs-1"><i class="fa-brands fa-youtube"></i></a>
                    <a href="mailto:ptchc@hcmute.edu.vn" class="text-primary fs-1"><i class="fa-solid fa-envelope"></i></a>
                    <a href="https://www.tiktok.com/@dhspkt.hcmute" class="text-primary fs-1"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>
        </div>
    </section>
    </main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- 1. KHỞI TẠO AOS (Animate on Scroll) ---
        AOS.init({
            duration: 800, // Thời gian animation
            once: true,     // Chỉ chạy 1 lần
            offset: 100,    // Kích hoạt khi cuộn qua 100px
        });

        // --- 2. KHỞI TẠO SWIPER (Carousels) ---
        
        // Carousel cho "Most Viewed"
        var mostViewedSwiper = new Swiper('#most-viewed-swiper', {
            loop: false,
            autoplay: {
                delay: 4000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '#most-viewed-swiper .swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '#most-viewed-swiper .swiper-button-next',
                prevEl: '#most-viewed-swiper .swiper-button-prev',
            },
            slidesPerView: 1,
            spaceBetween: 20,
            breakpoints: {
                768: { // md
                    slidesPerView: 2,
                    spaceBetween: 25
                },
                992: { // lg
                    slidesPerView: 3,
                    spaceBetween: 30
                }
            }
        });

        // Carousel cho "Newest Courses"
        var newestCoursesSwiper = new Swiper('#newest-courses-swiper', {
            loop: false, 
            autoplay: {
                delay: 4500,
                disableOnInteraction: false,
            },
            pagination: {
                el: '#newest-courses-swiper .swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '#newest-courses-swiper .swiper-button-next',
                prevEl: '#newest-courses-swiper .swiper-button-prev',
            },
            slidesPerView: 1,
            spaceBetween: 20,
            breakpoints: {
                768: { // md
                    slidesPerView: 3,
                    spaceBetween: 25
                },
                992: { // lg
                    slidesPerView: 4,
                    spaceBetween: 30
                }
            }
        });

        // --- 3. KÍCH HOẠT BOOTSTRAP SCROLLSPY ---
        // (Đã kích hoạt bằng data-attributes, nhưng có thể thêm code JS nếu cần)
        // Tự động cập nhật nav-link 'active' khi cuộn
        var scrollSpy = new bootstrap.ScrollSpy(document.body, {
            target: '#mainNavbar',
            offset: 100 // Tinh chỉnh offset cho khớp
        });

        // --- 4. TÙY CHỈNH NAVBAR SCROLL ---
        // Thêm/bớt shadow cho navbar khi cuộn
        const mainNavbar = document.getElementById('mainNavbar');
        if (mainNavbar) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    mainNavbar.classList.add('shadow-lg');
                    mainNavbar.classList.remove('shadow-sm');
                } else {
                    mainNavbar.classList.remove('shadow-lg');
                    mainNavbar.classList.add('shadow-sm');
                }
            });
        }

    });
</script>
